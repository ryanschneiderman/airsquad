<div id = "player-name"><%=@member.nickname%></div>
<div id = "radar-grid">
	<div id = "radar-headers">
		<div class = "radar-header">
			<h3>Basic Stats</h3>
			<div id = toggle-buttons>
				<button class = "basic-chart-toggle" id = "to-per-game-button" onclick = "toggle_radar_chart(1, this)">Per Game</button>
				<button class = "basic-chart-toggle" id = "to-per-minute-button" onclick = "toggle_radar_chart(2, this)">Per Minute</button>
			</div>
		</div>
		<div class = "radar-header">
			<h3>Advanced Stats</h3>
		</div>
	</div>
	<div id = "radar-elem">
		<div id = "basic-charts" class = "radar-chart">
			<div class="basic-chart"></div>
		</div>
		<div id = "advanced-charts" class = "radar-chart">
			<div class="advanced-chart"></div>
		</div>
	</div>
</div>
<div id = "trends-header">Trends</div>
<div id = "trends-grid">
	<div id = "trends-selector">
		<div id = "trend-types">
			<button id = "basic-trends" class = "trend-type" onclick = "toggle_trend_buttons(1, this)">Basic</button>
			<button id = "advanced-trends" class = "trend-type" onclick = "toggle_trend_buttons(2, this)">Advanced</button>
			<button id = "per-minute" class = "trend-type" onclick = "toggle_trend_buttons(3, this)">Per Minute</button>
		</div>
		<div id = "trends-buttons">
			<div id = "basic-trend-buttons">
				<% counter = 0 %>
				<% @trend_stat_lists.each do |stat| %>
					<button type = "button" class="btn trend-button-<%=counter%> trend-button" onclick = "select_basic_trend_stat(<%=counter%>, this)"><%=stat.stat%></button>
					<% counter += 1%>
				<%end%>
			</div>
			<div id = "advanced-trend-buttons">
				<% counter = 0 %>
				<% @adv_trend_stat_lists.each do |stat| %>
					<button  class="btn trend-button-<%=counter%> trend-button" onclick = "select_advanced_trend_stat(<%=counter%>, this)"><%=stat.stat%></button>
					<% counter += 1%>
				<%end%>
			</div>
			<div id = "per-minute-trend-buttons">
				<% counter = 0 %>
				<% @trend_stat_lists.each do |stat| %>
					<button  class="btn trend-button-<%=counter%> trend-button" onclick = "select_per_minute_trend_stat(<%=counter%>, this)"><%=stat.stat%></button>
					<% counter += 1%>
				<%end%>
			</div>
		</div>
	</div>
	<div id = "trends-chart">	
	</div>
</div>
<div id = "shot-trends-header">Shot Distribution</div>
<div id = "shot-trends">
		
</div>


<%= render 'stats/radar/radar_js' %>
<%= render 'stats/radar/radar_controller_js' %>
<%= render 'stats/trends/trends_js' %>
<%= render 'stats/trends/trends_controller_js' %>
<%= render 'stats/court/court_js' %>
<%= render 'stats/court/court_controller_js' %>


<script>
	var curr_basic_button = $("#basic-trend-buttons").children(".trend-button-0")[0]
	var curr_basic_index = 0;
	var curr_advanced_button = $("#advanced-trend-buttons").children(".trend-button-0")[0]
	var curr_advanced_index = 0;
	var curr_per_minute_button = $("#per-minute-trend-buttons").children(".trend-button-0")[0]
	var curr_per_minute_index = 0;
	initialize_basic_trend_stat_arrays();
	initialize_adv_trend_stat_arrays();
	select_basic_trend_stat(0, $('.trend-button-0')[ 0 ])


	// TODO: MOVE
function initialize_basic_trend_stat_arrays(){
	<%@minutes.each do |minutes|%>
		minutes_array.push(parseInt("<%=minutes.value%>")/60)
	<%end%>

	var curr_stat_list_id = "<%= @trend_stats[0].stat_list_id%>";
	basic_trend_array.push({"arr" : [], "stat_list_id" :  "<%= @trend_stats[0].stat_list_id%>"});
	per_minute_trend_array.push({"arr" : [], "stat_list_id" :  "<%= @trend_stats[0].stat_list_id%>"});
	var curr_index = 0;
	var date_index = 0;

	<% @trend_stats.each do |stat| %>
		if("<%=stat.stat_list_id%>" != curr_stat_list_id){
			basic_trend_array.push({"arr" : [], "stat_list_id" : "<%=stat.stat_list_id%>"});
			per_minute_trend_array.push({"arr" : [], "stat_list_id" : "<%=stat.stat_list_id%>"});
			curr_stat_list_id = "<%=stat.stat_list_id%>"
			curr_index++;
			date_index = 0;
		}
		basic_trend_array[curr_index].arr.push({"value": parseInt("<%=stat.value%>"), "date" : "<%=stat.date%>"})
		per_minute_trend_array[curr_index].arr.push({"value" : parseFloat("<%=stat.value%>")/minutes_array[date_index], "date" : "<%=stat.date%>"})
		date_index++;
	<%end%>
}

// TODO: MOVE
function initialize_adv_trend_stat_arrays(){
	var curr_stat_list_id = "<%= @adv_trend_stats[0].stat_list_id%>";
	advanced_trend_array.push({"arr" : [], "stat_list_id" : "<%= @adv_trend_stats[0].stat_list_id%>"});
	var curr_index = 0;
	<% @adv_trend_stats.each do |stat| %>
		if("<%=stat.stat_list_id%>" != curr_stat_list_id){
			advanced_trend_array.push({"arr" : [], "stat_list_id" : "<%=stat.stat_list_id%>"});
			curr_stat_list_id = "<%=stat.stat_list_id%>"
			curr_index++;
		}
		advanced_trend_array[curr_index].arr.push({"value" : parseInt("<%=stat.value%>"), "date" : "<%=stat.date%>"})
	<%end%>
}


</script>

